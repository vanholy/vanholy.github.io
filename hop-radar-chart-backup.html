<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profili Aromatici Luppoli - Grafici Radar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 50%, #FFD700 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="100" opacity="0.03">üç∫</text></svg>');
            background-size: 100px;
            opacity: 0.1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .hop-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .hop-select {
            padding: 12px;
            border: 2px solid #8B4513;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .hop-select:focus {
            outline: none;
            border-color: #D2691E;
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.2);
        }
        
        .select-container {
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .select-container select {
            flex: 1;
        }
        
        .nav-arrow {
            background: #8B4513;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .nav-arrow:hover {
            background: #D2691E;
            transform: scale(1.1);
        }
        
        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-left: auto;
        }
        
        .reset-btn:hover {
            background: linear-gradient(135deg, #c0392b, #a93226);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }
        
        .mode-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .mode-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            transition: transform 0.3s;
        }
        
        .chart-card:hover {
            transform: translateY(-5px);
        }
        
        .chart-title {
            font-size: 2em;
            font-weight: bold;
            color: #8B4513;
            text-align: center;
            margin-bottom: 10px;
            letter-spacing: 3px;
            text-transform: uppercase;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .chart-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        
        .canvas-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
        }
        
        .legend {
            margin-top: 20px;
            padding: 15px;
            background: rgba(139, 69, 19, 0.05);
            border-radius: 10px;
        }
        
        .legend-title {
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 10px;
        }
        
        .legend-items {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            font-size: 0.9em;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-value {
            font-weight: bold;
            color: #D2691E;
        }
        
        .comparison-mode {
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .comparison-mode h3 {
            margin-bottom: 10px;
        }
        
        .search-container {
            display: none;
        }
        
        .search-container.active {
            display: block;
        }
        
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 5px;
            color: white;
            font-weight: 600;
        }
        
        .filter-group select, .filter-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
            background: rgba(255,255,255,0.9);
        }
        
        .filter-group select:focus, .filter-group input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
        }
        
        .search-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .search-result-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .search-result-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .search-result-card.selected {
            border: 3px solid #FFD700;
            background: rgba(255, 215, 0, 0.1);
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .result-name {
            font-weight: bold;
            color: #8B4513;
            font-size: 1.1em;
        }
        
        .result-origin {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
        }
        
        .result-alpha {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        
        .result-aromas {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }
        
        .aroma-tag {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: 500;
        }
        
        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255,255,255,0.8);
            font-size: 1.1em;
        }
        
        .search-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .search-stat {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }
        
        .search-stat .value {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .search-stat .label {
            font-size: 0.85em;
            opacity: 0.9;
        }
        
        .btn-compare {
            background: white;
            color: #8B4513;
            border: none;
            padding: 10px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .btn-compare:hover {
            background: #FFD700;
            transform: scale(1.05);
        }
        
        .btn-compare.active {
            background: #FFD700;
        }
        
        .view-switch {
            display: none;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .view-switch.active {
            display: flex;
        }
        
        .switch-label {
            color: #8B4513;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
            background: rgba(255,255,255,0.9);
            padding: 5px 10px;
            border-radius: 20px;
            border: 2px solid #8B4513;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .toggle-switch.overlay {
            background: #FFD700;
        }
        
        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .toggle-switch.overlay .toggle-slider {
            transform: translateX(30px);
        }
        
        .guide-btn {
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 50%;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .guide-btn:hover {
            background: linear-gradient(135deg, #D2691E, #FFD700);
            transform: translateY(-2px) scale(1.1);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
        }
        
        .lang-toggle {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .lang-toggle:hover {
            background: linear-gradient(135deg, #3498db, #5dade2);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }
        
        .hop-guide {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .hop-guide.active {
            display: block;
        }
        
        .guide-header {
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1001;
        }
        
        .guide-header h2 {
            margin: 0 0 10px 0;
            font-size: 2em;
        }
        
        .guide-header p {
            margin: 0 0 15px 0;
            opacity: 0.9;
        }
        
        .close-guide {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .close-guide:hover {
            background: white;
            color: #8B4513;
        }
        
        .guide-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            background: white;
            border-radius: 15px;
            margin: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .guide-section {
            margin-bottom: 40px;
        }
        
        .guide-section h3 {
            color: #8B4513;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #D2691E;
            padding-bottom: 10px;
        }
        
        .style-category {
            margin-bottom: 30px;
            background: rgba(139, 69, 19, 0.05);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #D2691E;
        }
        
        .style-category h4 {
            color: #8B4513;
            font-size: 1.4em;
            margin-bottom: 15px;
        }
        
        .hop-category {
            margin-bottom: 20px;
        }
        
        .hop-category strong {
            color: #8B4513;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .hop-category ul {
            margin-left: 20px;
            line-height: 1.6;
        }
        
        .hop-category li {
            margin-bottom: 8px;
        }
        
        .dosage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .dosage-item {
            background: rgba(255, 215, 0, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #FFD700;
        }
        
        .dosage-item strong {
            color: #8B4513;
            display: block;
            margin-bottom: 10px;
        }
        
        .region-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .region-item {
            background: rgba(139, 69, 19, 0.05);
            padding: 20px;
            border-radius: 10px;
            border-top: 4px solid #8B4513;
        }
        
        .region-item h4 {
            color: #8B4513;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .region-item p {
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .blend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        
        .blend-category {
            background: rgba(255, 215, 0, 0.1);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #FFD700;
        }
        
        .blend-category h4 {
            color: #8B4513;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .blend-category ul {
            line-height: 1.8;
        }
        
        .blend-category li {
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .chart-title {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç∫ Profili Aromatici Luppoli</h1>
            <p>Grafici Radar Interattivi per Analisi Aromatica</p>
        </div>
        
        <div class="controls">
            <div class="comparison-mode">
                <h3>Modalit√† di Visualizzazione</h3>
                <div class="mode-controls">
                    <div class="mode-buttons">
                        <button class="btn-compare active" onclick="setMode('single')">Singolo Luppolo</button>
                        <button class="btn-compare" onclick="setMode('compare')">Confronta 3 Luppoli</button>
                        <button class="btn-compare" onclick="setMode('search')">Ricerca Avanzata</button>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <button class="lang-toggle" onclick="toggleLanguage()" id="langToggle" title="">üáÆüáπ IT</button>
                        <button class="reset-btn" onclick="resetCurrentMode()">üîÑ Reset</button>
                        <button class="guide-btn" onclick="toggleGuide()" title="Guida Completa ai Luppoli">üìñ</button>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin: 15px 0; padding: 15px; background: rgba(139,69,19,0.1); border-radius: 10px;">
                <strong style="color: #8B4513;">üìä Database Completo: 115+ Variet√† di Luppoli</strong><br>
                <span style="color: #666; font-size: 0.9em;">Tutti i luppoli dalla Guida Completa - Organizzati per Regione</span>
                <div style="margin-top: 10px; font-size: 0.85em; color: #8B4513;">
                    üá∫üá∏ USA: 27 | üá©üá™ Germania: 14 | üá¨üáß UK: 13 | üá¶üá∫ Australia: 9 | üá≥üáø N.Zelanda: 8 | üá®üáø R.Ceca: 6 | üá∏üáÆ Slovenia: 6 | üá´üá∑ Francia: 3 | üáØüáµ Giappone: 1
                </div>
            </div>
            
            <!-- Guida ai Luppoli (nascosta inizialmente) -->
            <div class="hop-guide" id="hopGuide">
                <div class="guide-header">
                    <h2>üìñ Guida Completa ai Luppoli per Homebrewing</h2>
                    <p>115+ Variet√† Tecniche per Brewfather - Database Completo</p>
                    <button class="close-guide" onclick="toggleGuide()">‚úñ Chiudi</button>
                </div>
                <div class="guide-content">
                    <div class="guide-section">
                        <h3>üç∫ Classificazione per Stili Birrari</h3>
                        
                        <div class="style-category">
                            <h4>LAGER E PILSNER</h4>
                            <div class="hop-category">
                                <strong>Luppoli Noble Classici:</strong>
                                <ul>
                                    <li><strong>Saaz (Repubblica Ceca):</strong> 2,5-4,5% AA, profilo speziato-terroso-erbaceo, 1-2,5 g/L per aroma</li>
                                    <li><strong>Hallertau Mittelfr√ºh (Germania):</strong> 3,0-5,5% AA, floreale-erbaceo-citrico, 1-3 g/L</li>
                                    <li><strong>Tettnanger (Germania):</strong> 3,4-5,2% AA, speziato-floreale-equilibrato, dual-purpose</li>
                                    <li><strong>Spalt/Spalter (Germania):</strong> 4,0-5,2% AA, carattere noble legnoso-pepato</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="style-category">
                            <h4>IPA E PALE ALE AMERICANE</h4>
                            <div class="hop-category">
                                <strong>Classici Americani:</strong>
                                <ul>
                                    <li><strong>Cascade:</strong> 4,5-7% AA, floreale-speziato-pompelmo, 0,5-1,5 oz/5gal dry hop</li>
                                    <li><strong>Centennial:</strong> 8-11,5% AA, "Super Cascade", limone-arancio-tropicale</li>
                                    <li><strong>Chinook:</strong> 12-14% AA, resinoso-albicocca-pompelmo-pino</li>
                                    <li><strong>Columbus/CTZ:</strong> 14-18% AA, citrico-legnoso-resinoso-dank, ottimo per bittering</li>
                                </ul>
                                <strong>Moderne Variet√† Ad Alto Impatto:</strong>
                                <ul>
                                    <li><strong>Citra¬Æ (HBC 394):</strong> 10-16% AA, agrumi-frutta tropicale-mango-passion fruit</li>
                                    <li><strong>Mosaic¬Æ (HBC 369):</strong> 11,5-13,5% AA, mirtillo-tropicale-guava-floreale</li>
                                    <li><strong>Amarillo¬Æ:</strong> 8-11% AA, arancio-limone-pompelmo-melone-pesca</li>
                                    <li><strong>Simcoe¬Æ:</strong> 12-14% AA, passion fruit-albicocca-pino-terroso-complesso</li>
                                    <li><strong>Azacca¬Æ:</strong> 14-16% AA, mango-ananas-agrumi-tropicale</li>
                                    <li><strong>Strata‚Ñ¢:</strong> 11-13% AA, dank-cannabis-tropicale-passion fruit</li>
                                    <li><strong>Sabro¬Æ:</strong> 14-18% AA, mandarino-cocco-cedro-menta</li>
                                    <li><strong>Idaho 7‚Ñ¢:</strong> 12-14% AA, ananas-pesca-mango-t√® nero</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="style-category">
                            <h4>NEIPA E HAZY IPA</h4>
                            <div class="hop-category">
                                <strong>Variet√† Ottimali per NEIPA:</strong>
                                <ul>
                                    <li><strong>Citra¬Æ + Mosaic¬Æ:</strong> Combo classica, 2-4 oz/5gal dry hop</li>
                                    <li><strong>Galaxy (Australia):</strong> 11-16% AA, passion fruit intenso-pesca-agrumi</li>
                                    <li><strong>Nelson Sauvin (NZ):</strong> 10-13% AA, carattere Sauvignon Blanc-uva spina</li>
                                    <li><strong>Riwaka (NZ):</strong> 4,5-6,5% AA, passion fruit e pompelmo intenso</li>
                                    <li><strong>Nectaron (NZ):</strong> 9-10% AA, mix intenso ananas-passion fruit-pesca</li>
                                    <li><strong>Krush¬Æ (HBC 586):</strong> 12-13% AA, cocktail di frutta-mango-guava</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="guide-section">
                        <h3>‚öóÔ∏è Parametri Tecnici per Brewfather</h3>
                        
                        <div class="dosage-table">
                            <h4>Dosaggi Standard (g/L)</h4>
                            <div class="dosage-grid">
                                <div class="dosage-item">
                                    <strong>Bittering (60-90 min):</strong>
                                    <ul>
                                        <li>High alpha (>15%): 0,5-2 g/L</li>
                                        <li>Medium alpha (8-15%): 1,5-4 g/L</li>
                                        <li>Low alpha (<8%): 3-8 g/L</li>
                                    </ul>
                                </div>
                                <div class="dosage-item">
                                    <strong>Flavor (15-30 min):</strong>
                                    <ul><li>Tutte le variet√†: 1-4 g/L</li></ul>
                                </div>
                                <div class="dosage-item">
                                    <strong>Aroma (0-10 min):</strong>
                                    <ul>
                                        <li>Delicate (Saaz, Strisselspalt): 0,5-2 g/L</li>
                                        <li>Standard: 1-3 g/L</li>
                                        <li>Bold character: 2-5 g/L</li>
                                    </ul>
                                </div>
                                <div class="dosage-item">
                                    <strong>Whirlpool/Hopstand:</strong>
                                    <ul>
                                        <li>Moderate: 3-7 g/L</li>
                                        <li>Heavy (craft style): 7-15 g/L</li>
                                        <li>Extreme (commercial NEIPA): 12-20 g/L</li>
                                    </ul>
                                </div>
                                <div class="dosage-item">
                                    <strong>Dry Hopping:</strong>
                                    <ul>
                                        <li>Light: 2-4 g/L</li>
                                        <li>Moderate: 4-8 g/L</li>
                                        <li>Heavy (IPA): 8-15 g/L</li>
                                        <li>Extreme (NEIPA): 15-37 g/L</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="guide-section">
                        <h3>üåç Variet√† per Regione Geografica</h3>
                        
                        <div class="region-grid">
                            <div class="region-item">
                                <h4>üá∫üá∏ STATI UNITI (29+ variet√†)</h4>
                                <p><strong>Washington/Yakima Valley:</strong><br>
                                Cascade, Centennial, Chinook, Columbus, Simcoe¬Æ, Warrior, Citra¬Æ, Mosaic¬Æ, Amarillo¬Æ, Azacca¬Æ, Strata‚Ñ¢, Sabro¬Æ</p>
                                <p><strong>Oregon:</strong><br>
                                Willamette, Crystal, Mt. Hood, Sterling, Idaho 7‚Ñ¢, Cashmere</p>
                            </div>
                            
                            <div class="region-item">
                                <h4>üá©üá™ GERMANIA (12+ variet√†)</h4>
                                <p><strong>Hallertau Region:</strong><br>
                                Hallertau Mittelfr√ºh, Hersbrucker, Perle, Magnum, Tettnanger, Spalt Select</p>
                                <p><strong>H√ºll Research Varieties:</strong><br>
                                Mandarina Bavaria, Hallertau Blanc, H√ºll Melon, Polaris, Ariana, Callista</p>
                            </div>
                            
                            <div class="region-item">
                                <h4>üá¨üáß REGNO UNITO (11+ variet√†)</h4>
                                <p><strong>Tradizionali:</strong><br>
                                East Kent Goldings, Fuggle, Challenger, First Gold, Bramling Cross, Target</p>
                                <p><strong>Charles Faram Moderni:</strong><br>
                                Jester¬Æ, Godiva‚Ñ¢, Mystic‚Ñ¢, Harlequin¬Æ, Archer¬Æ, Olicana¬Æ</p>
                            </div>
                            
                            <div class="region-item">
                                <h4>üá≥üáø NUOVA ZELANDA (8 variet√†)</h4>
                                <p>Nelson Sauvin, Motueka, Riwaka, Nectaron, Pacific Jade, Pacific Gem, Wakatu, Kohatu</p>
                            </div>
                            
                            <div class="region-item">
                                <h4>üá¶üá∫ AUSTRALIA (9 variet√†)</h4>
                                <p>Galaxy, Vic Secret, Ella, Enigma, Eclipse, Topaz, Pride of Ringwood, Super Pride</p>
                            </div>
                            
                            <div class="region-item">
                                <h4>üá®üáø REPUBBLICA CECA (8+ variet√†)</h4>
                                <p>Saaz, Saaz Late, Saaz Shine, Saaz Comfort, Premiant, Sl√°dek, Kazbek</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="guide-section">
                        <h3>üî¨ Combinazioni e Blend Raccomandati</h3>
                        
                        <div class="blend-grid">
                            <div class="blend-category">
                                <h4>Classici Americani</h4>
                                <ul>
                                    <li><strong>Base IPA:</strong> Cascade + Centennial + Chinook</li>
                                    <li><strong>Citrus Bomb:</strong> Amarillo + Citra + El Dorado</li>
                                    <li><strong>Tropical Modern:</strong> Citra + Mosaic + Galaxy</li>
                                    <li><strong>Pine/Dank:</strong> Simcoe + Columbus + Strata</li>
                                    <li><strong>Stone Fruit:</strong> Mosaic + Azacca + Idaho 7</li>
                                </ul>
                            </div>
                            
                            <div class="blend-category">
                                <h4>Europei Tradizionali</h4>
                                <ul>
                                    <li><strong>Pilsner Classica:</strong> Saaz + Saaz (late) + Saaz (dry hop)</li>
                                    <li><strong>German Lager:</strong> Hallertau + Tettnanger + Spalt</li>
                                    <li><strong>English Bitter:</strong> EKG + Fuggle + Challenger</li>
                                    <li><strong>Belgian Complexity:</strong> Strisselspalt + Styrian Golding + Aramis</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="hop-selector" id="hopSelector">
                <div class="select-container">
                    <button class="nav-arrow" onclick="navigateHop('hop1', -1)">‚Äπ</button>
                    <select class="hop-select" id="hop1" onchange="updateCharts()">
                        <option value="">${t('selectFirstHop')}</option>
                    </select>
                    <button class="nav-arrow" onclick="navigateHop('hop1', 1)">‚Ä∫</button>
                </div>
                <div class="select-container" style="display:none;" id="hop2Container">
                    <button class="nav-arrow" onclick="navigateHop('hop2', -1)">‚Äπ</button>
                    <select class="hop-select" id="hop2" onchange="updateCharts()">
                        <option value="">${t('selectSecondHop')}</option>
                    </select>
                    <button class="nav-arrow" onclick="navigateHop('hop2', 1)">‚Ä∫</button>
                </div>
                <div class="select-container" style="display:none;" id="hop3Container">
                    <button class="nav-arrow" onclick="navigateHop('hop3', -1)">‚Äπ</button>
                    <select class="hop-select" id="hop3" onchange="updateCharts()">
                        <option value="">${t('selectThirdHop')}</option>
                    </select>
                    <button class="nav-arrow" onclick="navigateHop('hop3', 1)">‚Ä∫</button>
                </div>
                
                <!-- Switch per modalit√† di visualizzazione nel confronto -->
                <div class="view-switch" id="viewSwitch">
                    <span class="switch-label">${t('separateCharts')}</span>
                    <div class="toggle-switch" id="toggleSwitch" onclick="toggleViewMode()">
                        <div class="toggle-slider"></div>
                    </div>
                    <span class="switch-label">${t('overlayChart')}</span>
                </div>
            </div>
            
            <div class="search-container" id="searchContainer">
                <div class="filters">
                    <div class="filter-group">
                        <label for="searchInput">üîç ${t('searchHop')}</label>
                        <input type="text" id="searchInput" placeholder="${t('searchPlaceholder')}">
                    </div>
                    
                    <div class="filter-group">
                        <label for="regionFilter">üåç ${t('region')}</label>
                        <select id="regionFilter">
                            <option value="">${t('allRegions')}</option>
                            <option value="üá∫üá∏ USA">üá∫üá∏ Stati Uniti</option>
                            <option value="üá©üá™ Germania">üá©üá™ Germania</option>
                            <option value="üá¨üáß UK">üá¨üáß Regno Unito</option>
                            <option value="üá®üáø Rep. Ceca">üá®üáø Repubblica Ceca</option>
                            <option value="üá≥üáø Nuova Zelanda">üá≥üáø Nuova Zelanda</option>
                            <option value="üá¶üá∫ Australia">üá¶üá∫ Australia</option>
                            <option value="üá∏üáÆ Slovenia">üá∏üáÆ Slovenia</option>
                            <option value="üá´üá∑ Francia">üá´üá∑ Francia</option>
                            <option value="üáØüáµ Giappone">üáØüáµ Giappone</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="alphaFilter">‚öóÔ∏è ${t('alphaAcids')}</label>
                        <select id="alphaFilter">
                            <option value="">${t('allRanges')}</option>
                            <option value="low">Basso (&lt;6%)</option>
                            <option value="medium">Medio (6-10%)</option>
                            <option value="high">Alto (10-15%)</option>
                            <option value="very-high">Molto Alto (&gt;15%)</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="aromaFilter">üå∏ Profilo Aromatico</label>
                        <select id="aromaFilter">
                            <option value="">Tutti i Profili</option>
                            <option value="Agrumato">Agrumato</option>
                            <option value="Fruttato">Fruttato</option>
                            <option value="Floreale">Floreale</option>
                            <option value="Erbaceo">Erbaceo</option>
                            <option value="Speziato">Speziato</option>
                            <option value="Resinoso">Resinoso</option>
                            <option value="Terroso">Terroso</option>
                            <option value="Citrico">Citrico</option>
                        </select>
                    </div>
                </div>
                
                <div class="search-stats" id="searchStats">
                    <div class="search-stat">
                        <div class="value" id="searchResultCount">0</div>
                        <div class="label">Risultati</div>
                    </div>
                    <div class="search-stat">
                        <div class="value" id="searchAvgAlpha">0%</div>
                        <div class="label">Alpha Medio</div>
                    </div>
                    <div class="search-stat">
                        <div class="value" id="searchSelectedCount">0</div>
                        <div class="label">Selezionati</div>
                    </div>
                </div>
                
                <div class="search-results" id="searchResults">
                    <!-- I risultati della ricerca verranno generati qui -->
                </div>
            </div>
        </div>
        
        <div class="charts-container" id="chartsContainer">
            <!-- I grafici verranno generati dinamicamente qui -->
        </div>
    </div>
    
    <script>
        // ============= INTERNATIONALIZATION SYSTEM =============
        let currentLanguage = 'it';
        
        const translations = {
            it: {
                title: "üç∫ Profili Aromatici Luppoli",
                subtitle: "Grafici Radar Interattivi per Analisi Aromatica",
                
                // Mode buttons
                singleHop: "Singolo Luppolo",
                compareHops: "Confronta 3 Luppoli", 
                advancedSearch: "Ricerca Avanzata",
                reset: "üîÑ Reset",
                
                // Hop selector
                selectFirst: "Seleziona Primo Luppolo",
                selectSecond: "Seleziona Secondo Luppolo",
                selectThird: "Seleziona Terzo Luppolo",
                
                // Switch labels
                separateCharts: "Grafici Separati",
                overlayChart: "Grafico Sovrapposto",
                
                // Search interface
                searchHop: "üîç Cerca Luppolo",
                searchPlaceholder: "Es: Cascade, Citra, Saaz...",
                region: "üåç Regione",
                allRegions: "Tutte le Regioni",
                alphaAcids: "‚öóÔ∏è Alpha Acidi",
                allRanges: "Tutti i Range",
                aromaProfile: "üå∏ Profilo Aromatico",
                allProfiles: "Tutti i Profili",
                
                // Search stats
                results: "Risultati",
                avgAlpha: "Alpha Medio", 
                selected: "Selezionati",
                
                // Chart messages
                selectHopMessage: "Seleziona un luppolo dal menu a tendina per visualizzare il grafico radar",
                selectHopsMessage: "Seleziona uno o pi√π luppoli dai menu a tendina per visualizzare i grafici radar",
                selectOverlayMessage: "Seleziona almeno un luppolo dai menu a tendina per visualizzare il grafico sovrapposto",
                
                // Chart titles
                aromaComparison: "Confronto Profili Aromatici",
                overlayVisualization: "Visualizzazione Sovrapposta",
                hopsCompared: "Luppoli Confrontati",
                
                // Legend
                aromaIntensity: "Intensit√† Aromatiche (0-5)",
                intensity: "Intensit√† (0-5)",
                
                // Database info
                completeDatabase: "üìä Database Completo: 115+ Variet√† di Luppoli",
                allHopsGuide: "Tutti i luppoli dalla Guida Completa - Organizzati per Regione",
                
                // Guide
                guideTitle: "üìñ Guida Completa ai Luppoli per Homebrewing",
                guideSubtitle: "115+ Variet√† Tecniche per Brewfather - Database Completo",
                closeGuide: "‚úñ Chiudi",
                
                // Tooltips
                completeGuideTooltip: "Guida Completa ai Luppoli",
                languageTooltip: "Cambia Lingua / Switch Language"
            },
            en: {
                title: "üç∫ Hop Aroma Profiles",
                subtitle: "Interactive Radar Charts for Aromatic Analysis",
                
                // Mode buttons
                singleHop: "Single Hop",
                compareHops: "Compare 3 Hops",
                advancedSearch: "Advanced Search", 
                reset: "üîÑ Reset",
                
                // Hop selector
                selectFirst: "Select First Hop",
                selectSecond: "Select Second Hop",
                selectThird: "Select Third Hop",
                
                // Switch labels
                separateCharts: "Separate Charts",
                overlayChart: "Overlay Chart",
                
                // Search interface
                searchHop: "üîç Search Hop",
                searchPlaceholder: "E.g.: Cascade, Citra, Saaz...",
                region: "üåç Region",
                allRegions: "All Regions",
                alphaAcids: "‚öóÔ∏è Alpha Acids",
                allRanges: "All Ranges",
                aromaProfile: "üå∏ Aroma Profile",
                allProfiles: "All Profiles",
                
                // Search stats
                results: "Results",
                avgAlpha: "Avg Alpha",
                selected: "Selected",
                
                // Chart messages
                selectHopMessage: "Select a hop from the dropdown to display the radar chart",
                selectHopsMessage: "Select one or more hops from the dropdowns to display the radar charts",
                selectOverlayMessage: "Select at least one hop from the dropdowns to display the overlay chart",
                
                // Chart titles
                aromaComparison: "Aroma Profile Comparison",
                overlayVisualization: "Overlay Visualization", 
                hopsCompared: "Compared Hops",
                
                // Legend
                aromaIntensity: "Aroma Intensity (0-5)",
                intensity: "Intensity (0-5)",
                
                // Database info
                completeDatabase: "üìä Complete Database: 115+ Hop Varieties",
                allHopsGuide: "All hops from the Complete Guide - Organized by Region",
                
                // Guide
                guideTitle: "üìñ Complete Homebrewing Hop Guide",
                guideSubtitle: "115+ Technical Varieties for Brewfather - Complete Database",
                closeGuide: "‚úñ Close",
                
                // Tooltips
                completeGuideTooltip: "Complete Hop Guide",
                languageTooltip: "Cambia Lingua / Switch Language"
            }
        };
        
        // Get translation function
        function t(key) {
            return translations[currentLanguage][key] || key;
        }
        
        // Toggle language function
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'it' ? 'en' : 'it';
            updateLanguage();
            localStorage.setItem('hopRadarLanguage', currentLanguage);
        }
        
        // Update all interface elements with current language
        function updateLanguage() {
            // Update page title and header
            document.querySelector('.header h1').textContent = t('title');
            document.querySelector('.header p').textContent = t('subtitle');
            
            // Update language toggle button
            const langToggle = document.getElementById('langToggle');
            if (currentLanguage === 'it') {
                langToggle.innerHTML = 'üáÆüáπ IT';
                langToggle.title = t('languageTooltip');
            } else {
                langToggle.innerHTML = 'üá∫üá∏ EN';
                langToggle.title = t('languageTooltip');
            }
            
            // Update mode buttons
            document.querySelectorAll('.btn-compare')[0].textContent = t('singleHop');
            document.querySelectorAll('.btn-compare')[1].textContent = t('compareHops');
            document.querySelectorAll('.btn-compare')[2].textContent = t('advancedSearch');
            
            // Update reset button
            document.querySelector('.reset-btn').textContent = t('reset');
            
            // Update guide button tooltip
            document.querySelector('.guide-btn').title = t('completeGuideTooltip');
            
            // Update hop selectors
            document.getElementById('hop1').options[0].textContent = t('selectFirst');
            document.getElementById('hop2').options[0].textContent = t('selectSecond');
            document.getElementById('hop3').options[0].textContent = t('selectThird');
            
            // Update switch labels
            document.querySelectorAll('.switch-label')[0].textContent = t('separateCharts');
            document.querySelectorAll('.switch-label')[1].textContent = t('overlayChart');
            
            // Update database info
            document.querySelector('strong[style*="color: #8B4513"]').innerHTML = t('completeDatabase');
            document.querySelector('span[style*="font-size: 0.9em"]').textContent = t('allHopsGuide');
            
            // Update search interface
            updateSearchInterface();
            
            // Update guide content
            updateGuideContent();
            
            // Update charts if they exist
            updateCharts();
        }
        
        // Update search interface elements
        function updateSearchInterface() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.previousElementSibling.textContent = t('searchHop');
                searchInput.placeholder = t('searchPlaceholder');
            }
            
            const regionFilter = document.getElementById('regionFilter');
            if (regionFilter) {
                regionFilter.previousElementSibling.textContent = t('region');
                regionFilter.options[0].textContent = t('allRegions');
            }
            
            const alphaFilter = document.getElementById('alphaFilter');
            if (alphaFilter) {
                alphaFilter.previousElementSibling.textContent = t('alphaAcids');
                alphaFilter.options[0].textContent = t('allRanges');
            }
            
            const aromaFilter = document.getElementById('aromaFilter');
            if (aromaFilter) {
                aromaFilter.previousElementSibling.textContent = t('aromaProfile');
                aromaFilter.options[0].textContent = t('allProfiles');
            }
            
            // Update search stats
            document.querySelectorAll('.search-stat .label')[0].textContent = t('results');
            document.querySelectorAll('.search-stat .label')[1].textContent = t('avgAlpha');
            document.querySelectorAll('.search-stat .label')[2].textContent = t('selected');
        }
        
        // Update guide content
        function updateGuideContent() {
            const guideHeader = document.querySelector('.guide-header h2');
            const guideSubtitle = document.querySelector('.guide-header p');
            const closeButton = document.querySelector('.close-guide');
            
            if (guideHeader) guideHeader.textContent = t('guideTitle');
            if (guideSubtitle) guideSubtitle.textContent = t('guideSubtitle');
            if (closeButton) closeButton.textContent = t('closeGuide');
        }
        
        // Initialize language from localStorage
        function initializeLanguage() {
            const savedLang = localStorage.getItem('hopRadarLanguage');
            if (savedLang && (savedLang === 'it' || savedLang === 'en')) {
                currentLanguage = savedLang;
            }
            updateLanguage();
        }
        
        // Database completo dei profili aromatici dei luppoli (scala 1-5)
        // Basato sulla Guida Completa ai Luppoli - 115+ variet√†
        const hopsProfiles = {
            // ============= STATI UNITI (29+ variet√†) =============
            'Cascade': {
                origin: 'üá∫üá∏ USA',
                alpha: '4.5-7%',
                description: 'Luppolo classico americano con profilo floreale-speziato-pompelmo. Ideale per dry hop 0.5-1.5 oz/5gal. Carattere distintivo citrico-floreale che ha definito lo stile American Pale Ale.',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 3,
                    'Floreale': 4,
                    'Erbaceo': 2,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Centennial': {
                origin: 'üá∫üá∏ USA',
                alpha: '8-11.5%',
                description: '"Super Cascade" con intenso profilo limone-arancio-tropicale. Eccellente dual-purpose per bittering e aroma. Pi√π potente del Cascade con note agrumi pi√π marcate.',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 4,
                    'Floreale': 3,
                    'Erbaceo': 1,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Chinook': {
                origin: 'üá∫üá∏ USA',
                alpha: '12-14%',
                description: 'Carattere resinoso-albicocca-pompelmo-pino. High-alpha versatile ideale sia per bittering che per late additions. Profilo complesso con note pine distintive.',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 3,
                    'Resinoso': 5,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            'Columbus/CTZ': {
                origin: 'üá∫üá∏ USA',
                alpha: '14-18%',
                description: 'High-alpha per bittering pulito con carattere citrico-legnoso-resinoso-dank nelle late additions. Pilastro delle West Coast IPA per il suo potere amaricante.',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 2,
                    'Floreale': 1,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 5,
                    'Terroso': 4,
                    'Citrico': 3
                }
            },
            'Citra¬Æ': {
                origin: 'üá∫üá∏ USA',
                alpha: '10-16%',
                description: 'Variet√† premium HBC 394 con intensi agrumi-frutta tropicale-mango-passion fruit. Standard per NEIPA e moderne IPA. Profilo fruttato esplosivo.',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 1,
                    'Resinoso': 2,
                    'Terroso': 0,
                    'Citrico': 5
                }
            },
            'Mosaic¬Æ': {
                origin: 'üá∫üá∏ USA',
                alpha: '11.5-13.5%',
                description: 'HBC 369 con complesso profilo mirtillo-tropicale-guava-floreale. Partner ideale del Citra per NEIPA. Combinazione unica di frutta e note floreali.',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 4,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'Amarillo¬Æ': {
                origin: 'üá∫üá∏ USA',
                alpha: '8-11%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 4,
                    'Floreale': 3,
                    'Erbaceo': 1,
                    'Speziato': 1,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Simcoe¬Æ': {
                origin: 'üá∫üá∏ USA',
                alpha: '12-14%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 5,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            'Azacca¬Æ': {
                origin: 'üá∫üá∏ USA',
                alpha: '14-16%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 1,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Strata‚Ñ¢': {
                origin: 'üá∫üá∏ USA',
                alpha: '11-13%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 4,
                    'Speziato': 2,
                    'Resinoso': 5,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            'Sabro¬Æ': {
                origin: 'üá∫üá∏ USA',
                alpha: '14-18%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'Idaho 7‚Ñ¢': {
                origin: 'üá∫üá∏ USA',
                alpha: '12-14%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 4
                }
            },
            'Warrior': {
                origin: 'üá∫üá∏ USA',
                alpha: '15-17%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 1,
                    'Floreale': 1,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 4,
                    'Terroso': 3,
                    'Citrico': 1
                }
            },
            'Summit‚Ñ¢': {
                origin: 'üá∫üá∏ USA',
                alpha: '16-19%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 2,
                    'Floreale': 1,
                    'Erbaceo': 4,
                    'Speziato': 4,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Nugget': {
                origin: 'üá∫üá∏ USA',
                alpha: '12-14%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 1,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Galena': {
                origin: 'üá∫üá∏ USA',
                alpha: '12-14%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 3,
                    'Floreale': 1,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Crystal': {
                origin: 'üá∫üá∏ USA',
                alpha: '3.5-5.5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 2,
                    'Citrico': 2
                }
            },
            'Willamette': {
                origin: 'üá∫üá∏ USA',
                alpha: '4-6%',
                profile: {
                    'Agrumato': 1,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 4,
                    'Citrico': 1
                }
            },
            'Mt. Hood': {
                origin: 'üá∫üá∏ USA',
                alpha: '4-8%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 1,
                    'Floreale': 3,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Sterling': {
                origin: 'üá∫üá∏ USA',
                alpha: '6-9%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Cashmere': {
                origin: 'üá∫üá∏ USA',
                alpha: '7.7-9.1%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 4,
                    'Floreale': 3,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'El Dorado¬Æ': {
                origin: 'üá∫üá∏ USA',
                alpha: '14-16%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 1,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 3
                }
            },
            'Krush¬Æ (HBC 586)': {
                origin: 'üá∫üá∏ USA',
                alpha: '12-13%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 1,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'Talus¬Æ (HBC 692)': {
                origin: 'üá∫üá∏ USA',
                alpha: '8-10%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 3,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 4,
                    'Terroso': 2,
                    'Citrico': 5
                }
            },
            'Pahto¬Æ (HBC 682)': {
                origin: 'üá∫üá∏ USA',
                alpha: '17-20%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 2,
                    'Floreale': 1,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            'Ekuanot‚Ñ¢': {
                origin: 'üá∫üá∏ USA',
                alpha: '13-15%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 5
                }
            },
            
            // ============= GERMANIA (14+ variet√†) =============
            'Hallertau Mittelfr√ºh': {
                origin: 'üá©üá™ Germania',
                alpha: '3-5.5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 1,
                    'Floreale': 5,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Tettnanger': {
                origin: 'üá©üá™ Germania',
                alpha: '3.4-5.2%',
                profile: {
                    'Agrumato': 1,
                    'Fruttato': 1,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 4,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 1
                }
            },
            'Spalt': {
                origin: 'üá©üá™ Germania',
                alpha: '4-5.2%',
                profile: {
                    'Agrumato': 1,
                    'Fruttato': 1,
                    'Floreale': 3,
                    'Erbaceo': 3,
                    'Speziato': 4,
                    'Resinoso': 2,
                    'Terroso': 4,
                    'Citrico': 1
                }
            },
            'Hersbrucker': {
                origin: 'üá©üá™ Germania',
                alpha: '1.5-4%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Perle': {
                origin: 'üá©üá™ Germania',
                alpha: '6-9.5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 2
                }
            },
            'Magnum': {
                origin: 'üá©üá™ Germania',
                alpha: '11-16%',
                profile: {
                    'Agrumato': 1,
                    'Fruttato': 1,
                    'Floreale': 2,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 1
                }
            },
            'Hallertau Tradition': {
                origin: 'üá©üá™ Germania',
                alpha: '4.5-7%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Mandarina Bavaria': {
                origin: 'üá©üá™ Germania',
                alpha: '7-10%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 1,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Hallertau Blanc': {
                origin: 'üá©üá™ Germania',
                alpha: '9-12%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 3,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 1,
                    'Terroso': 1,
                    'Citrico': 3
                }
            },
            'H√ºll Melon': {
                origin: 'üá©üá™ Germania',
                alpha: '6-8%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 5,
                    'Floreale': 3,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 1,
                    'Terroso': 1,
                    'Citrico': 2
                }
            },
            'Polaris': {
                origin: 'üá©üá™ Germania',
                alpha: '18-23%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 3,
                    'Floreale': 1,
                    'Erbaceo': 5,
                    'Speziato': 4,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 2
                }
            },
            'Ariana': {
                origin: 'üá©üá™ Germania',
                alpha: '9-12%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'Callista': {
                origin: 'üá©üá™ Germania',
                alpha: '2-5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 5,
                    'Floreale': 3,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 1,
                    'Terroso': 1,
                    'Citrico': 2
                }
            },
            
            // ============= REGNO UNITO (13+ variet√†) =============
            'East Kent Goldings': {
                origin: 'üá¨üáß UK',
                alpha: '4.5-6.5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 5,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Fuggle': {
                origin: 'üá¨üáß UK',
                alpha: '3-5.6%',
                profile: {
                    'Agrumato': 1,
                    'Fruttato': 2,
                    'Floreale': 3,
                    'Erbaceo': 5,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 5,
                    'Citrico': 1
                }
            },
            'Challenger': {
                origin: 'üá¨üáß UK',
                alpha: '6.5-8.5%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 3,
                    'Floreale': 3,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Target': {
                origin: 'üá¨üáß UK',
                alpha: '9.5-12.5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 2,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Northern Brewer': {
                origin: 'üá¨üáß UK',
                alpha: '6-10%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 2,
                    'Erbaceo': 5,
                    'Speziato': 3,
                    'Resinoso': 4,
                    'Terroso': 4,
                    'Citrico': 1
                }
            },
            'First Gold': {
                origin: 'üá¨üáß UK',
                alpha: '6.5-8.5%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 3,
                    'Floreale': 3,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Bramling Cross': {
                origin: 'üá¨üáß UK',
                alpha: '5-7%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Jester¬Æ': {
                origin: 'üá¨üáß UK',
                alpha: '7-9%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 5
                }
            },
            'Godiva‚Ñ¢': {
                origin: 'üá¨üáß UK',
                alpha: '6-9%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 4,
                    'Floreale': 3,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            'Mystic‚Ñ¢': {
                origin: 'üá¨üáß UK',
                alpha: '4-7%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 3
                }
            },
            'Harlequin¬Æ': {
                origin: 'üá¨üáß UK',
                alpha: '9.5-12%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 3
                }
            },
            'Archer¬Æ': {
                origin: 'üá¨üáß UK',
                alpha: '4.5-6.5%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 3,
                    'Floreale': 3,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            'Olicana¬Æ': {
                origin: 'üá¨üáß UK',
                alpha: '4-6%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            
            // ============= REPUBBLICA CECA (8+ variet√†) =============
            'Saaz': {
                origin: 'üá®üáø Rep. Ceca',
                alpha: '2.5-4.5%',
                profile: {
                    'Agrumato': 1,
                    'Fruttato': 1,
                    'Floreale': 3,
                    'Erbaceo': 5,
                    'Speziato': 5,
                    'Resinoso': 1,
                    'Terroso': 4,
                    'Citrico': 1
                }
            },
            'Saaz Late': {
                origin: 'üá®üáø Rep. Ceca',
                alpha: '3-5%',
                profile: {
                    'Agrumato': 1,
                    'Fruttato': 1,
                    'Floreale': 3,
                    'Erbaceo': 5,
                    'Speziato': 5,
                    'Resinoso': 1,
                    'Terroso': 4,
                    'Citrico': 1
                }
            },
            'Saaz Shine': {
                origin: 'üá®üáø Rep. Ceca',
                alpha: '3-5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 3,
                    'Erbaceo': 4,
                    'Speziato': 4,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Premiant': {
                origin: 'üá®üáø Rep. Ceca',
                alpha: '7-10%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 2,
                    'Floreale': 3,
                    'Erbaceo': 4,
                    'Speziato': 4,
                    'Resinoso': 2,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            'Sl√°dek': {
                origin: 'üá®üáø Rep. Ceca',
                alpha: '5-7%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 3,
                    'Erbaceo': 4,
                    'Speziato': 4,
                    'Resinoso': 2,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Kazbek': {
                origin: 'üá®üáø Rep. Ceca',
                alpha: '5-8%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 3,
                    'Floreale': 3,
                    'Erbaceo': 4,
                    'Speziato': 4,
                    'Resinoso': 2,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            
            // ============= NUOVA ZELANDA (8 variet√†) =============
            'Nelson Sauvin': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '10-13%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'Motueka': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '6.5-7.5%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 4,
                    'Floreale': 3,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 1,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Riwaka': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '4.5-6.5%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Nectaron': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '9-10%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'Pacific Jade': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '12-14%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 3,
                    'Floreale': 2,
                    'Erbaceo': 4,
                    'Speziato': 4,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Pacific Gem': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '13-16%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Wakatu': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '6.5-8.5%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 3,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            'Kohatu': {
                origin: 'üá≥üáø Nuova Zelanda',
                alpha: '6-7%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 3,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 3
                }
            },
            
            // ============= AUSTRALIA (9 variet√†) =============
            'Galaxy': {
                origin: 'üá¶üá∫ Australia',
                alpha: '11-16%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 1,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 4
                }
            },
            'Vic Secret': {
                origin: 'üá¶üá∫ Australia',
                alpha: '14-17%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 3,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Ella': {
                origin: 'üá¶üá∫ Australia',
                alpha: '13-16%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 4,
                    'Floreale': 4,
                    'Erbaceo': 2,
                    'Speziato': 4,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Enigma': {
                origin: 'üá¶üá∫ Australia',
                alpha: '15-18%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 3,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 3
                }
            },
            'Eclipse': {
                origin: 'üá¶üá∫ Australia',
                alpha: '16-18.5%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 1,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 1,
                    'Citrico': 5
                }
            },
            'Topaz': {
                origin: 'üá¶üá∫ Australia',
                alpha: '15.5-18%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            'Pride of Ringwood': {
                origin: 'üá¶üá∫ Australia',
                alpha: '7-10%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 2,
                    'Floreale': 2,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            'Super Pride': {
                origin: 'üá¶üá∫ Australia',
                alpha: '13-15%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 2,
                    'Floreale': 2,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 4,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            'Sylva': {
                origin: 'üá¶üá∫ Australia',
                alpha: '5-7%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 4,
                    'Citrico': 2
                }
            },
            
            // ============= SLOVENIA (6 variet√†) =============
            'Styrian Goldings': {
                origin: 'üá∏üáÆ Slovenia',
                alpha: '4-6%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 4,
                    'Citrico': 2
                }
            },
            'Aurora': {
                origin: 'üá∏üáÆ Slovenia',
                alpha: '7-12%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 3,
                    'Floreale': 4,
                    'Erbaceo': 3,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            'Bobek': {
                origin: 'üá∏üáÆ Slovenia',
                alpha: '3.5-7%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 2,
                    'Floreale': 4,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Styrian Wolf': {
                origin: 'üá∏üáÆ Slovenia',
                alpha: '11-15%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            'Styrian Dragon': {
                origin: 'üá∏üáÆ Slovenia',
                alpha: '8-12%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 5,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 2,
                    'Resinoso': 2,
                    'Terroso': 1,
                    'Citrico': 3
                }
            },
            'Styrian Cardinal': {
                origin: 'üá∏üáÆ Slovenia',
                alpha: '10-14%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 4,
                    'Floreale': 2,
                    'Erbaceo': 2,
                    'Speziato': 3,
                    'Resinoso': 3,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            
            // ============= FRANCIA (3 variet√†) =============
            'Strisselspalt': {
                origin: 'üá´üá∑ Francia',
                alpha: '1.8-2.5%',
                profile: {
                    'Agrumato': 2,
                    'Fruttato': 1,
                    'Floreale': 5,
                    'Erbaceo': 4,
                    'Speziato': 3,
                    'Resinoso': 1,
                    'Terroso': 3,
                    'Citrico': 2
                }
            },
            'Aramis': {
                origin: 'üá´üá∑ Francia',
                alpha: '6-8%',
                profile: {
                    'Agrumato': 3,
                    'Fruttato': 3,
                    'Floreale': 3,
                    'Erbaceo': 4,
                    'Speziato': 4,
                    'Resinoso': 2,
                    'Terroso': 3,
                    'Citrico': 3
                }
            },
            'Triskel': {
                origin: 'üá´üá∑ Francia',
                alpha: '8-9%',
                profile: {
                    'Agrumato': 4,
                    'Fruttato': 4,
                    'Floreale': 3,
                    'Erbaceo': 2,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 4
                }
            },
            
            // ============= GIAPPONE (1 variet√†) =============
            'Sorachi Ace': {
                origin: 'üáØüáµ Giappone',
                alpha: '11.5-16%',
                profile: {
                    'Agrumato': 5,
                    'Fruttato': 3,
                    'Floreale': 2,
                    'Erbaceo': 5,
                    'Speziato': 3,
                    'Resinoso': 2,
                    'Terroso': 2,
                    'Citrico': 5
                }
            }
        };
        
        let currentMode = 'single';
        let isOverlayMode = false;
        let selectedHopsForSearch = [];
        let filteredHops = [];
        
        // Inizializza i selettori
        function initializeSelectors() {
            const hopNames = Object.keys(hopsProfiles).sort();
            
            // Raggruppa i luppoli per origine
            const hopsByOrigin = {};
            hopNames.forEach(hop => {
                const origin = hopsProfiles[hop].origin;
                if (!hopsByOrigin[origin]) {
                    hopsByOrigin[origin] = [];
                }
                hopsByOrigin[origin].push(hop);
            });
            
            for (let i = 1; i <= 3; i++) {
                const select = document.getElementById(`hop${i}`);
                select.innerHTML = `<option value="">Seleziona ${i}¬∞ Luppolo (${hopNames.length} variet√†)</option>`;
                
                // Aggiungi i luppoli raggruppati per origine
                Object.keys(hopsByOrigin).sort().forEach(origin => {
                    const optgroup = document.createElement('optgroup');
                    optgroup.label = `${origin} (${hopsByOrigin[origin].length})`;
                    
                    hopsByOrigin[origin].forEach(hop => {
                        const option = document.createElement('option');
                        option.value = hop;
                        option.textContent = `${hop} - ${hopsProfiles[hop].alpha}`;
                        optgroup.appendChild(option);
                    });
                    
                    select.appendChild(optgroup);
                });
            }
            
            // Seleziona alcuni esempi iniziali popolari
            document.getElementById('hop1').value = 'Citra¬Æ';
            updateCharts();
        }
        
        // Cambia modalit√†
        function setMode(mode) {
            currentMode = mode;
            const buttons = document.querySelectorAll('.btn-compare');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const hopSelector = document.getElementById('hopSelector');
            const searchContainer = document.getElementById('searchContainer');
            const viewSwitch = document.getElementById('viewSwitch');
            const hop2 = document.getElementById('hop2');
            const hop3 = document.getElementById('hop3');
            
            if (mode === 'search') {
                hopSelector.style.display = 'none';
                searchContainer.classList.add('active');
                viewSwitch.classList.remove('active');
                initializeSearch();
                performSearch();
            } else {
                hopSelector.style.display = 'block';
                searchContainer.classList.remove('active');
                
                if (mode === 'compare') {
                    document.getElementById('hop2Container').style.display = 'flex';
                    document.getElementById('hop3Container').style.display = 'flex';
                    viewSwitch.classList.add('active');
                    // Seleziona automaticamente altri luppoli per il confronto
                    if (!hop2.value) hop2.value = 'Mosaic¬Æ';
                    if (!hop3.value) hop3.value = 'Galaxy';
                } else {
                    document.getElementById('hop2Container').style.display = 'none';
                    document.getElementById('hop3Container').style.display = 'none';
                    viewSwitch.classList.remove('active');
                }
            }
            
            updateCharts();
        }
        
        // Gestisce il toggle dello switch
        function toggleViewMode() {
            isOverlayMode = !isOverlayMode;
            const toggleSwitch = document.getElementById('toggleSwitch');
            
            if (isOverlayMode) {
                toggleSwitch.classList.add('overlay');
            } else {
                toggleSwitch.classList.remove('overlay');
            }
            
            updateCharts();
        }
        
        // Disegna il grafico radar
        function drawRadarChart(canvasId, hopName, color = '#FFD700') {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const hop = hopsProfiles[hopName];
            
            if (!hop) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                return;
            }
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 120;
            const axes = Object.keys(hop.profile);
            const numAxes = axes.length;
            const angleStep = (Math.PI * 2) / numAxes;
            
            // Pulisci il canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Disegna le griglie circolari
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            for (let level = 1; level <= 5; level++) {
                ctx.beginPath();
                for (let i = 0; i <= numAxes; i++) {
                    const angle = i * angleStep - Math.PI / 2;
                    const x = centerX + Math.cos(angle) * (radius * level / 5);
                    const y = centerY + Math.sin(angle) * (radius * level / 5);
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.closePath();
                ctx.stroke();
            }
            
            // Disegna gli assi
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 1;
            axes.forEach((axis, i) => {
                const angle = i * angleStep - Math.PI / 2;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(
                    centerX + Math.cos(angle) * radius,
                    centerY + Math.sin(angle) * radius
                );
                ctx.stroke();
            });
            
            // Disegna le etichette degli assi
            ctx.fillStyle = '#333';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            axes.forEach((axis, i) => {
                const angle = i * angleStep - Math.PI / 2;
                const labelRadius = radius + 70;
                const x = centerX + Math.cos(angle) * labelRadius;
                const y = centerY + Math.sin(angle) * labelRadius;
                
                // Regola l'allineamento del testo in base alla posizione
                if (Math.abs(x - centerX) < 15) {
                    ctx.textAlign = 'center';
                } else if (x < centerX) {
                    ctx.textAlign = 'right';
                } else {
                    ctx.textAlign = 'left';
                }
                
                // Aggiungi un background bianco semi-trasparente per migliorare la leggibilit√†
                const textWidth = ctx.measureText(axis).width;
                const textHeight = 16;
                let bgX = x - textWidth/2;
                let bgY = y - textHeight/2;
                
                if (ctx.textAlign === 'right') {
                    bgX = x - textWidth - 5;
                } else if (ctx.textAlign === 'left') {
                    bgX = x - 5;
                } else {
                    bgX = x - textWidth/2 - 5;
                }
                
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillRect(bgX, bgY, textWidth + 10, textHeight);
                
                ctx.fillStyle = '#333';
                ctx.fillText(axis, x, y);
            });
            
            // Disegna l'area del profilo
            ctx.fillStyle = color + '66'; // Aggiungi trasparenza
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            axes.forEach((axis, i) => {
                const value = hop.profile[axis];
                const angle = i * angleStep - Math.PI / 2;
                const distance = (radius * value) / 5;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Disegna i punti
            ctx.fillStyle = color;
            axes.forEach((axis, i) => {
                const value = hop.profile[axis];
                const angle = i * angleStep - Math.PI / 2;
                const distance = (radius * value) / 5;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Disegna i valori numerici sui punti
            ctx.fillStyle = '#333';
            ctx.font = 'bold 10px Arial';
            axes.forEach((axis, i) => {
                const value = hop.profile[axis];
                if (value > 0) {
                    const angle = i * angleStep - Math.PI / 2;
                    const distance = (radius * value) / 5;
                    const x = centerX + Math.cos(angle) * distance;
                    const y = centerY + Math.sin(angle) * distance;
                    
                    ctx.fillStyle = 'white';
                    ctx.beginPath();
                    ctx.arc(x, y - 12, 10, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#333';
                    ctx.textAlign = 'center';
                    ctx.fillText(value, x, y - 12);
                }
            });
        }
        
        // Disegna grafici sovrapposti su un singolo canvas
        function drawOverlayRadarChart(canvasId, hopNames, colors) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // Filtra i luppoli validi
            const validHops = hopNames.filter(hopName => hopName && hopsProfiles[hopName]);
            
            if (validHops.length === 0) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                return;
            }
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 130;
            const firstHop = hopsProfiles[validHops[0]];
            const axes = Object.keys(firstHop.profile);
            const numAxes = axes.length;
            const angleStep = (Math.PI * 2) / numAxes;
            
            // Pulisci il canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Disegna le griglie circolari
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            for (let level = 1; level <= 5; level++) {
                ctx.beginPath();
                for (let i = 0; i <= numAxes; i++) {
                    const angle = i * angleStep - Math.PI / 2;
                    const x = centerX + Math.cos(angle) * (radius * level / 5);
                    const y = centerY + Math.sin(angle) * (radius * level / 5);
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.closePath();
                ctx.stroke();
            }
            
            // Disegna gli assi
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 1;
            axes.forEach((axis, i) => {
                const angle = i * angleStep - Math.PI / 2;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(
                    centerX + Math.cos(angle) * radius,
                    centerY + Math.sin(angle) * radius
                );
                ctx.stroke();
            });
            
            // Disegna le etichette degli assi
            ctx.fillStyle = '#333';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            axes.forEach((axis, i) => {
                const angle = i * angleStep - Math.PI / 2;
                const labelRadius = radius + 80;
                const x = centerX + Math.cos(angle) * labelRadius;
                const y = centerY + Math.sin(angle) * labelRadius;
                
                // Regola l'allineamento del testo in base alla posizione
                if (Math.abs(x - centerX) < 15) {
                    ctx.textAlign = 'center';
                } else if (x < centerX) {
                    ctx.textAlign = 'right';
                } else {
                    ctx.textAlign = 'left';
                }
                
                // Aggiungi un background bianco semi-trasparente per migliorare la leggibilit√†
                const textWidth = ctx.measureText(axis).width;
                const textHeight = 16;
                let bgX = x - textWidth/2;
                let bgY = y - textHeight/2;
                
                if (ctx.textAlign === 'right') {
                    bgX = x - textWidth - 5;
                } else if (ctx.textAlign === 'left') {
                    bgX = x - 5;
                } else {
                    bgX = x - textWidth/2 - 5;
                }
                
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillRect(bgX, bgY, textWidth + 10, textHeight);
                
                ctx.fillStyle = '#333';
                ctx.fillText(axis, x, y);
            });
            
            // Disegna tutti i profili sovrapposti
            validHops.forEach((hopName, hopIndex) => {
                const hop = hopsProfiles[hopName];
                const color = colors[hopIndex % colors.length];
                
                // Disegna l'area del profilo
                ctx.fillStyle = color + '33'; // Trasparenza maggiore per overlay
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                
                ctx.beginPath();
                axes.forEach((axis, i) => {
                    const value = hop.profile[axis];
                    const angle = i * angleStep - Math.PI / 2;
                    const distance = (radius * value) / 5;
                    const x = centerX + Math.cos(angle) * distance;
                    const y = centerY + Math.sin(angle) * distance;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                // Disegna i punti
                ctx.fillStyle = color;
                axes.forEach((axis, i) => {
                    const value = hop.profile[axis];
                    const angle = i * angleStep - Math.PI / 2;
                    const distance = (radius * value) / 5;
                    const x = centerX + Math.cos(angle) * distance;
                    const y = centerY + Math.sin(angle) * distance;
                    
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                    ctx.fill();
                });
            });
        }
        
        // Aggiorna i grafici
        function updateCharts() {
            if (currentMode === 'search') {
                updateChartsForSearch();
                return;
            }
            
            const container = document.getElementById('chartsContainer');
            container.innerHTML = '';
            
            if (currentMode === 'single') {
                const hopName = document.getElementById('hop1').value;
                if (hopName) {
                    const hop = hopsProfiles[hopName];
                    const chartCard = document.createElement('div');
                    chartCard.className = 'chart-card';
                    chartCard.style.maxWidth = '600px';
                    chartCard.style.margin = '0 auto';
                    
                    chartCard.innerHTML = `
                        <div class="chart-title">${hopName}</div>
                        <div class="chart-subtitle">${hop.origin} - Alpha: ${hop.alpha}</div>
                        <div class="canvas-container">
                            <canvas id="chart1" width="550" height="550"></canvas>
                        </div>
                        <div class="legend">
                            <div class="legend-title">Intensit√† Aromatiche (0-5)</div>
                            <div class="legend-items">
                                ${Object.entries(hop.profile).map(([key, value]) => 
                                    `<div class="legend-item">
                                        <span>${key}:</span>
                                        <span class="legend-value">${value}/5</span>
                                    </div>`
                                ).join('')}
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(chartCard);
                    setTimeout(() => drawRadarChart('chart1', hopName), 100);
                } else {
                    // Mostra messaggio quando non √® selezionato nessun luppolo
                    container.innerHTML = '<div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.8);">Seleziona un luppolo dal menu a tendina per visualizzare il grafico radar</div>';
                }
            } else if (currentMode === 'compare') {
                // Modalit√† confronto - con switch per grafici separati o sovrapposti
                const hopNames = [
                    document.getElementById('hop1').value,
                    document.getElementById('hop2').value,
                    document.getElementById('hop3').value
                ];
                const validHops = hopNames.filter(name => name && hopsProfiles[name]);
                const colors = ['#FFD700', '#00CED1', '#FF69B4'];
                
                if (validHops.length === 0) {
                    container.innerHTML = '<div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.8);">Seleziona uno o pi√π luppoli dai menu a tendina per visualizzare i grafici radar</div>';
                } else if (isOverlayMode) {
                    // Modalit√† grafico sovrapposto
                    const chartCard = document.createElement('div');
                    chartCard.className = 'chart-card';
                    chartCard.style.maxWidth = '700px';
                    chartCard.style.margin = '0 auto';
                    
                    chartCard.innerHTML = `
                        <div class="chart-title">Confronto Profili Aromatici</div>
                        <div class="chart-subtitle">Visualizzazione Sovrapposta - ${validHops.length} Luppoli</div>
                        <div class="canvas-container">
                            <canvas id="overlayChart" width="650" height="650"></canvas>
                        </div>
                        <div class="legend">
                            <div class="legend-title">Luppoli Confrontati</div>
                            <div class="legend-items" style="grid-template-columns: 1fr;">
                                ${validHops.map((hopName, index) => {
                                    const hop = hopsProfiles[hopName];
                                    return `<div class="legend-item" style="margin-bottom: 15px; border-left: 4px solid ${colors[index]}; padding-left: 10px;">
                                        <div style="font-weight: bold; color: ${colors[index]};">${hopName}</div>
                                        <div style="font-size: 0.9em; color: #666;">${hop.origin} - Alpha: ${hop.alpha}</div>
                                        <div style="font-size: 0.8em; margin-top: 5px;">
                                            ${Object.entries(hop.profile)
                                                .filter(([key, value]) => value >= 3)
                                                .map(([key, value]) => `${key}: ${value}`)
                                                .join(' ‚Ä¢ ')
                                            }
                                        </div>
                                    </div>`
                                }).join('')}
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(chartCard);
                    setTimeout(() => drawOverlayRadarChart('overlayChart', validHops, colors), 100);
                } else {
                    // Modalit√† confronto normale - grafici separati
                    for (let i = 1; i <= 3; i++) {
                        const hopName = document.getElementById(`hop${i}`).value;
                        if (hopName) {
                            const hop = hopsProfiles[hopName];
                            const chartCard = document.createElement('div');
                            chartCard.className = 'chart-card';
                            
                            chartCard.innerHTML = `
                                <div class="chart-title">${hopName}</div>
                                <div class="chart-subtitle">${hop.origin} - Alpha: ${hop.alpha}</div>
                                <div class="canvas-container">
                                    <canvas id="chart${i}" width="500" height="500"></canvas>
                                </div>
                                <div class="legend">
                                    <div class="legend-title">Intensit√† (0-5)</div>
                                    <div class="legend-items">
                                        ${Object.entries(hop.profile).map(([key, value]) => 
                                            `<div class="legend-item">
                                                <span>${key}:</span>
                                                <span class="legend-value">${value}</span>
                                            </div>`
                                        ).join('')}
                                    </div>
                                </div>
                            `;
                            
                            container.appendChild(chartCard);
                            setTimeout(() => drawRadarChart(`chart${i}`, hopName, colors[i-1]), 100);
                        }
                    }
                }
            }
        }
        
        // Funzioni per la navigazione dei luppoli
        function navigateHop(selectId, direction) {
            const select = document.getElementById(selectId);
            const currentIndex = select.selectedIndex;
            const newIndex = currentIndex + direction;
            
            if (newIndex >= 0 && newIndex < select.options.length) {
                select.selectedIndex = newIndex;
                updateCharts();
                updateNavigationArrows();
            }
        }
        
        // Funzione per resettare la modalit√† corrente
        function resetCurrentMode() {
            if (currentMode === 'single') {
                document.getElementById('hop1').selectedIndex = 0;
            } else if (currentMode === 'compare') {
                document.getElementById('hop1').selectedIndex = 0;
                document.getElementById('hop2').selectedIndex = 0;
                document.getElementById('hop3').selectedIndex = 0;
                // Reset anche lo switch
                isOverlayMode = false;
                const toggleSwitch = document.getElementById('toggleSwitch');
                toggleSwitch.classList.remove('overlay');
            } else if (currentMode === 'search') {
                // Reset filtri di ricerca
                document.getElementById('searchInput').value = '';
                document.getElementById('regionFilter').selectedIndex = 0;
                document.getElementById('alphaFilter').selectedIndex = 0;
                document.getElementById('aromaFilter').selectedIndex = 0;
                // Reset selezioni
                selectedHopsForSearch = [];
                performSearch();
            }
            updateCharts();
            updateNavigationArrows();
        }
        
        // Aggiorna lo stato delle frecce di navigazione
        function updateNavigationArrows() {
            const selects = ['hop1', 'hop2', 'hop3'];
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    const container = select.closest('.select-container');
                    if (container) {
                        const prevBtn = container.querySelector('.nav-arrow:first-child');
                        const nextBtn = container.querySelector('.nav-arrow:last-child');
                        
                        if (prevBtn && nextBtn) {
                            prevBtn.disabled = select.selectedIndex <= 0;
                            nextBtn.disabled = select.selectedIndex >= select.options.length - 1;
                        }
                    }
                }
            });
        }
        
        // Funzioni per la ricerca avanzata
        function initializeSearch() {
            // Aggiungi event listener per i filtri
            document.getElementById('searchInput').addEventListener('input', performSearch);
            document.getElementById('regionFilter').addEventListener('change', performSearch);
            document.getElementById('alphaFilter').addEventListener('change', performSearch);
            document.getElementById('aromaFilter').addEventListener('change', performSearch);
        }
        
        function getAlphaRange(alphaStr) {
            const match = alphaStr.match(/([\d.]+)-([\d.]+)%/);
            if (!match) return 'medium';
            const avg = (parseFloat(match[1]) + parseFloat(match[2])) / 2;
            if (avg < 6) return 'low';
            if (avg < 10) return 'medium';
            if (avg < 15) return 'high';
            return 'very-high';
        }
        
        function performSearch() {
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const regionValue = document.getElementById('regionFilter').value;
            const alphaValue = document.getElementById('alphaFilter').value;
            const aromaValue = document.getElementById('aromaFilter').value;
            
            // Filtra i luppoli basandosi sui criteri
            filteredHops = Object.keys(hopsProfiles).filter(hopName => {
                const hop = hopsProfiles[hopName];
                
                // Filtro per nome
                if (searchValue && !hopName.toLowerCase().includes(searchValue)) {
                    return false;
                }
                
                // Filtro per regione
                if (regionValue && hop.origin !== regionValue) {
                    return false;
                }
                
                // Filtro per alpha
                if (alphaValue && getAlphaRange(hop.alpha) !== alphaValue) {
                    return false;
                }
                
                // Filtro per aroma
                if (aromaValue) {
                    const profileValues = Object.keys(hop.profile);
                    const hasAroma = profileValues.some(key => {
                        return key === aromaValue && hop.profile[key] >= 3;
                    });
                    if (!hasAroma) return false;
                }
                
                return true;
            });
            
            displaySearchResults();
        }
        
        function displaySearchResults() {
            const resultsContainer = document.getElementById('searchResults');
            const statsContainer = document.getElementById('searchStats');
            
            if (filteredHops.length === 0) {
                resultsContainer.innerHTML = '<div class="no-results">Nessun luppolo trovato con i criteri selezionati</div>';
                document.getElementById('searchResultCount').textContent = '0';
                document.getElementById('searchAvgAlpha').textContent = '0%';
                return;
            }
            
            // Calcola statistiche
            let totalAlpha = 0;
            filteredHops.forEach(hopName => {
                const hop = hopsProfiles[hopName];
                const alphaRange = hop.alpha.match(/([\d.]+)-([\d.]+)%/);
                if (alphaRange) {
                    totalAlpha += (parseFloat(alphaRange[1]) + parseFloat(alphaRange[2])) / 2;
                }
            });
            const avgAlpha = (totalAlpha / filteredHops.length).toFixed(1);
            
            document.getElementById('searchResultCount').textContent = filteredHops.length;
            document.getElementById('searchAvgAlpha').textContent = avgAlpha + '%';
            document.getElementById('searchSelectedCount').textContent = selectedHopsForSearch.length;
            
            // Genera le card dei risultati
            resultsContainer.innerHTML = filteredHops.map(hopName => {
                const hop = hopsProfiles[hopName];
                const isSelected = selectedHopsForSearch.includes(hopName);
                
                // Ottieni i top 3 aromi
                const topAromas = Object.entries(hop.profile)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 3)
                    .filter(([key, value]) => value >= 2);
                
                return `
                    <div class="search-result-card ${isSelected ? 'selected' : ''}" 
                         onclick="toggleHopSelection('${hopName}')">
                        <div class="result-header">
                            <div class="result-name">${hopName}</div>
                            <div class="result-origin">${hop.origin}</div>
                        </div>
                        <div class="result-alpha">Alpha: ${hop.alpha}</div>
                        <div class="result-aromas">
                            ${topAromas.map(([aroma, intensity]) => 
                                `<span class="aroma-tag">${aroma} (${intensity})</span>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function toggleHopSelection(hopName) {
            const index = selectedHopsForSearch.indexOf(hopName);
            
            if (index === -1) {
                // Aggiungi alla selezione (max 6 per non sovraccaricare la visualizzazione)
                if (selectedHopsForSearch.length < 6) {
                    selectedHopsForSearch.push(hopName);
                }
            } else {
                // Rimuovi dalla selezione
                selectedHopsForSearch.splice(index, 1);
            }
            
            displaySearchResults();
            updateChartsForSearch();
        }
        
        function updateChartsForSearch() {
            const container = document.getElementById('chartsContainer');
            container.innerHTML = '';
            
            if (selectedHopsForSearch.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.8);">Seleziona uno o pi√π luppoli dai risultati della ricerca per visualizzare i loro grafici radar</div>';
                return;
            }
            
            const colors = ['#FFD700', '#00CED1', '#FF69B4', '#32CD32', '#FF6347', '#9370DB'];
            selectedHopsForSearch.forEach((hopName, index) => {
                const hop = hopsProfiles[hopName];
                const chartCard = document.createElement('div');
                chartCard.className = 'chart-card';
                
                chartCard.innerHTML = `
                    <div class="chart-title">${hopName}</div>
                    <div class="chart-subtitle">${hop.origin} - Alpha: ${hop.alpha}</div>
                    <div class="canvas-container">
                        <canvas id="searchChart${index}" width="500" height="500"></canvas>
                    </div>
                    <div class="legend">
                        <div class="legend-title">Intensit√† (0-5)</div>
                        <div class="legend-items">
                            ${Object.entries(hop.profile).map(([key, value]) => 
                                `<div class="legend-item">
                                    <span>${key}:</span>
                                    <span class="legend-value">${value}</span>
                                </div>`
                            ).join('')}
                        </div>
                    </div>
                `;
                
                container.appendChild(chartCard);
                setTimeout(() => drawRadarChart(`searchChart${index}`, hopName, colors[index % colors.length]), 100);
            });
        }
        
        // Gestisce l'apertura/chiusura della guida ai luppoli
        function toggleGuide() {
            const guide = document.getElementById('hopGuide');
            guide.classList.toggle('active');
            
            // Previeni lo scroll del body quando la guida √® aperta
            if (guide.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = 'auto';
            }
        }
        
        // Inizializza l'applicazione
        window.onload = function() {
            initializeSelectors();
            
            // Inizializza le frecce di navigazione
            updateNavigationArrows();
            
            // Chiudi la guida se si clicca fuori dal contenuto
            document.getElementById('hopGuide').addEventListener('click', function(e) {
                if (e.target === this) {
                    toggleGuide();
                }
            });
        };
    </script>
</body>
</html>